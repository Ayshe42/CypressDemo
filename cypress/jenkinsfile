pipeline {
  agent any
    
     
    paramaters{
        string(name:'SPEC', defaultValue:"cypress/e2e/tests/ClickCheckBox.cy.js", description: "Enter the script path that you want to execute")
    choice(name: 'BROWSER', choices: ['chrome','edge','firefox'], description: "Choice the browser where you want to execute yout scripts")
    }
options{
    ansiColor('xterm')
}
  stages {
    stage('Building') {
      
       echo "Building the application"
      }
stage('Testing') {
    
      steps {
        bat 'npm i'
        bat "npx cypress run --browser ${BROWSER} --spec ${SPEC}
      }
    }
      stage('Deploying') {
      
       echo "Deploying the application"
      }
  }
  post{
  always
  {
  publishHTML([allowMissing: false, alwaysLinkToLastBuild: false, keepAll: false, reportDir: 'cypress/report', reportFiles: 'index.html', reportName: 'HTML Report', reportTitles: '', useWrapperFileDirectly: true])
  }
  }
}